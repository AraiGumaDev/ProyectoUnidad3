<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../scripts/register-consumption.js"> </script>
</head>
<body>

    <h2>Adiccionar registro</h2>
    <form>
        <label for="direccion">Dirección</label><br>
        <input type="text" id="direccion" name="direccion" value="" class="form-control"><br>
        <label for="estrato">Estrato</label><br>
        <select id="estrato" name="estrato">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
        </select><br>
        <label for="numeroHabitantes">Número de habitantes</label>
        <input type="number" id="numeroHabitantes" name="numeroHabitantes" value="" min="1" class="form-control"><br>
        <label for="fechaUltimaMedicion">Fecha última medición</label>
        <input type="date" id="fechaUltimaMedicion" name="fechaUltimaMedicion" value="" min="2000-01-01" max="2023-11-20"
               required /> <span class="validity"></span><br>
        <label for="consumoAguaMes">Consumo de agua(Litros)</label>
        <input type="number" id="consumoAguaMes" name="consumoAguaMes" value="" min="1" class="form-control"><br>

        <input type="submit" value="Guardar" onclick="add();">
        <a href="../index.html" class="link-primary">Volver al inicio</a>

    </form>
</body>
</html>
<script>
    function add(){
        console.log("Adicionando");
        var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
        xmlhttp.open( "POST", "http://localhost:8080/registers/", true );

        xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

        var direccion = document.getElementById("direccion");
        var estrato = document.getElementById("estrato");
        var numeroHabitantes = document.getElementById("numeroHabitantes");
        var fechaUltimaMedicion = document.getElementById("fechaUltimaMedicion");
        var consumoAguaMes = document.getElementById("consumoAguaMes");


        var newRegister = {
            "direccion": direccion.value,
            "estrato": estrato.value,
            "numeroHabitantes": numeroHabitantes.value,
            "fechaUltimaMedicion": fechaUltimaMedicion.value,
            "consumoAguaMes": consumoAguaMes.value,
        }

        xmlhttp.send(JSON.stringify(newRegister));
    }
</script>
